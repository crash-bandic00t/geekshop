<ul class="menu">
    {% for menu in menu_links %}
    <li><a href="{% url menu.url %}"
        {% if request.resolver_match.view_name == menu.url or request.resolver_match.view_name == menu.url_products %} 
            class="active"
        {% endif %}>
            {{ menu.name }}
        </a>
    </li>
    {% endfor %}
    <li>
        {% if user.is_authenticated %}
            <a href="{% url 'basketapp:basket' %}"
            {% if request.resolver_match.view_name == 'basketapp:basket' %}
                class="active"
            {% endif %}
            >корзина ({{ user.basket.count }})</a>
            <li class="dropdown">
                <a class="dropdown-toggle" href="#" id="DropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    {{ user.first_name|default:'Пользователь' }}
                </a>
                <ul class="dropdown-menu" aria-labelledby="DropdownMenuLink">
                    <li><a class="dropdown-item dropdown-link" href="{% url 'authapp:edit' %}">профиль</a></li>
                    <li><a class="dropdown-item dropdown-link" href="{% url 'ordersapp:orders-list' %}">заказы</a></li>
                </ul>
            </li>
            <a href="{% url 'authapp:logout' %}">выйти</a>
        {% else %}
            <a href="{% url 'authapp:login' %}"
            {% if request.resolver_match.view_name == 'authapp:login' %}
                class="active"
            {% endif %}
            >войти</a>
            <a href="{% url 'authapp:register' %}"
            {% if request.resolver_match.view_name == 'authapp:register' %}
                class="active"
            {% endif %}
            >регистрация</a>
        {% endif %}
    </li>
</ul>